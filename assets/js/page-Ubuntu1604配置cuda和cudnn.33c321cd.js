(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{689:function(s,a,n){"use strict";n.r(a);var e=n(1),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("GPU加速必须在cuda9以上才可以完成加速，cuda9以后的版本在Linux系统上只支持Ubuntu16.04和Ubuntu17.04。")]),s._v(" "),n("h2",{attrs:{id:"一、设备要求"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、设备要求"}},[s._v("#")]),s._v(" 一、设备要求")]),s._v(" "),n("p",[s._v("系统：Ubuntu16.04及以上")]),s._v(" "),n("p",[s._v("显卡驱动：NVIDIA系列（384以上）")]),s._v(" "),n("p",[s._v("驱动检查：终端命令"),n("code",[s._v("nvidia-smi")])]),s._v(" "),n("blockquote",[n("p",[s._v("新安装的Ubuntu系统安装NVIDIA驱动步骤:")]),s._v(" "),n("p",[s._v("a.删除旧驱动：")]),s._v(" "),n("p",[s._v("`sudo apt-get remove --purge nvidia*")]),s._v(" "),n("p",[s._v("b.禁用自带的nouveau nvidia驱动：")]),s._v(" "),n("p",[s._v("看下Nouveau是否已经被禁用")]),s._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("lsmod | grep nouveau  \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("如果已经没有任何显示说明不用禁用了，否则继续下面操作")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo vim /etc/modprobe.d/blacklist-nouveau.conf #创建一个文件（注：按一下i键，表示现在进行内容插入）\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("并添加如下内容：")]),s._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("blacklist nouveau\noptions nouveau modeset=0 \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])]),s._v(" "),n("h2",{attrs:{id:"二、安装cuda9-0"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、安装cuda9-0"}},[s._v("#")]),s._v(" 二、安装cuda9.0")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://developer.nvidia.com/cuda-90-download-archive?target_os=Linux&target_arch=x86_64&target_distro=Ubuntu&target_version=1604&target_type=runfilelocal",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网下载"),n("OutboundLink")],1),s._v("。有对应的deb和.run文件，有具体的安装命令。")]),s._v(" "),n("p",[s._v("推荐.run文件，因为deb文件安装，可能会修改已安装好的驱动和。")]),s._v(" "),n("p",[s._v("进入下载目录，给文件添加运行权限：")]),s._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("chmod +x ./cuda_9.0.176_384.81_linux.run \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("运行安装")]),s._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo ./cuda_9.0.176_384.81_linux.run \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("启动安装程序，一直按空格到最后（可以选择Ctrl+c跳过），不用担心，到99%的时候，输入accept接受条款")]),s._v(" "),n("p",[s._v("注意：")]),s._v(" "),n("ul",[n("li",[s._v("第一个提醒你是否安装驱动时，选“n”，其余都“y”，安装路径选择默认的路径。")]),s._v(" "),n("li",[s._v("如果需要安装多版本CUDA，在安装到选择symtomic link to "),n("code",[s._v("/urs/local/cuda")]),s._v("时候，选择'n'，其它都是\"y\"。")])]),s._v(" "),n("p",[n("strong",[s._v("以上为两种cuda的安装方法，不过并没有结束，安装完毕后必须添加环境")])]),s._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("gedit ~/.bashrc \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 在文件末尾添加环境变量\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda-9.0/lib64\nexport PATH=$PATH:/usr/local/cuda-9.0/bin\nexport CUDA_HOME=$CUDA_HOME:/usr/local/cuda-9.0\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("添加完后，终端命令："),n("code",[s._v("source ～/.bashrc")])]),s._v(" "),n("p",[s._v("终端命令查看是否安装成功："),n("code",[s._v("nvcc -V")]),s._v("，若出现nvcc未安装，")]),s._v(" "),n("p",[s._v("执行了 sudo apt-get install nvidia-cuda-toolkit 命令，nvcc命令可以正常执行，但是运行nvcc --version发现版本为5.5，与原来安装的CUDA 10.0不匹配，这将会导致一系列不兼容问题（比如在python中使用sk-cuda库就报错，因为nvcc版本不一致），遂通过如下步骤解决：")]),s._v(" "),n("p",[s._v("1、使用sudo apt-get autoremove nvidia-cuda-toolkit 卸载5.5版本")]),s._v(" "),n("p",[s._v("2、查看/usr/local/cuda/bin下是否有nvcc可执行程序，如果没有说明cuda没有正常安装，需要重新安装。")]),s._v(" "),n("p",[s._v("3、如果有nvcc可执行程序，切换到管理员权限，重新执行上面步骤，添加环境。")]),s._v(" "),n("h2",{attrs:{id:"三、安装cudnn7-3-1"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、安装cudnn7-3-1"}},[s._v("#")]),s._v(" 三、安装cudnn7.3.1")]),s._v(" "),n("p",[s._v("去"),n("a",{attrs:{href:"https://developer.nvidia.com/rdp/cudnn-archive",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网下载"),n("OutboundLink")],1),s._v("，此处下载的是"),n("code",[s._v("cuDNN v7.3.1 Library for Linux")]),s._v("版本。是一个.tgz文件。")]),s._v(" "),n("p",[s._v("下载完直接解压，解压会出现一个cuda文件夹，里面有两个文件include 和lib64，把里面的文件"),n("code",[s._v("copy到/usr/local/cuda-9.0")]),s._v("里面相应的目录里，具体命令如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo cp cuda/include/cudnn.h /usr/local/cuda-9.0/include\nsudo cp cuda/lib64/libcudnn* /usr/local/cuda-9.0/lib64\nsudo chmod a+r /usr/local/cuda-9.0/include/cudnn.h /usr/local/cuda-9.0/lib64/libcudnn*\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("查看cudnn版本，检查是否安装好：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cat /usr/local/cuda/include/cudnn.h | grep CUDNN_MAJOR -A 2 \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"四、卸载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、卸载"}},[s._v("#")]),s._v(" 四、卸载")]),s._v(" "),n("p",[s._v("（1）卸载CUDA")]),s._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo /usr/local/cuda-9.0/bin/uninstall_cuda_9.0.pl \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("（2）卸载CUDNN")]),s._v(" "),n("p",[s._v("删除原来的cudnn文件：")]),s._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo rm -rf /usr/local/cuda-9.0/lib64/libcudnn*\nsudo rm -rf /usr/local/cuda-9.0/include/cudnn.h\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/58114055",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ubuntu16.04下cuda9.0+cudnn7.0安装参考教程1"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.jianshu.com/p/6a6fbce9073f",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ubuntu 多版本Cuda(8.0,9.0)以及CuDnn安装参考教程2"),n("OutboundLink")],1)]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"pytorch-gpu环境配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pytorch-gpu环境配置"}},[s._v("#")]),s._v(" pytorch_gpu环境配置")]),s._v(" "),n("p",[s._v("前提是已经配置好cuda9.0和cudnn7.0")]),s._v(" "),n("p",[s._v("在Anaconda环境下，新建一个pytorch-gpu环境，安装pytorch。")]),s._v(" "),n("p",[s._v("一、创建新的虚拟环境")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("conda create -n pytorch_gpu python=3.7\nconda activate pytorch_gpu /source activate pytorch_gpu #激动虚拟环境\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("二、安装pytorch GPU版本")]),s._v(" "),n("p",[s._v("此处是官网直接下载安装，具体考虑下载速度，可离线安装")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("conda install pytorch=1.7.1 torchvision torchaudio cudatoolkit=9.2 -c pytorch\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("下载速度过慢，选用国内源：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("##win\nconda install pytorch=1.7.1 torchvision torchaudio cudatoolkit=9.2 -c https://mirrors.bfsu.edu.cn/anaconda/cloud/pytorch/win-64/\n\n##linux\nconda install pytorch=1.7.1 torchvision torchaudio cudatoolkit=9.2 -c https://mirrors.bfsu.edu.cn/anaconda/cloud/pytorch/linux-64/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("code",[s._v("torchvision")]),s._v("和"),n("code",[s._v("torchaudio")]),s._v("跟随安装的python版本和pytorch版本自动对应。")]),s._v(" "),n("p",[s._v("pytorch_gpu使用"),n("strong",[s._v("cudatoolkit（是cuda的子集，里面的东西足够pytorch-gpu版本使用")]),s._v("），相当于虚拟环境内置的cuda，不需要系统cuda。")]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"tensorflow-gpu-keras环境配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tensorflow-gpu-keras环境配置"}},[s._v("#")]),s._v(" tensorflow_gpu_keras环境配置")]),s._v(" "),n("p",[s._v("Keras其实就是TensorFlow和Keras的接口（Keras作为前端，TensorFlow或theano作为后端），它也很灵活，且比较容易学。可以把keras看作为tensorflow封装后的一个API。")]),s._v(" "),n("p",[s._v("目前Keras是tensorflow官方的API。")]),s._v(" "),n("h3",{attrs:{id:"查看已经安装的python版本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看已经安装的python版本"}},[s._v("#")]),s._v(" 查看已经安装的Python版本")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ls | grep python\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"将pip服务器更换为国内的镜像服务器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#将pip服务器更换为国内的镜像服务器"}},[s._v("#")]),s._v(" 将pip服务器更换为国内的镜像服务器")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 如果不存在此文件夹，则创建之\nmkdir ~/.pip\nvim ~/.pip/pip.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("内容如下")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[global]\nindex-url=http://mirrors.aliyun.com/pypi/simple/\n[install]\ntrusted-host=mirrors.aliyun.com\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"tensorflow-gpu和keras安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tensorflow-gpu和keras安装"}},[s._v("#")]),s._v(" tensorflow-gpu和keras安装")]),s._v(" "),n("h4",{attrs:{id:"一、新建虚拟环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、新建虚拟环境"}},[s._v("#")]),s._v(" 一、新建虚拟环境")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("conda create -n tensorflow_gpu python=3.6 (ipykernel) #选择加如jupyter notebook内核\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("找到环境支持的对应的版本：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190819221921944.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RZVVRfeGlhb21pbmc=,size_16,color_FFFFFF,t_70",alt:"img",loading:"lazy"}})]),s._v(" "),n("h4",{attrs:{id:"二、安装tensorflow-gpu"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、安装tensorflow-gpu"}},[s._v("#")]),s._v(" 二、安装tensorflow-gpu")]),s._v(" "),n("p",[s._v("终端命令：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pip install --ignore-installed --upgrade https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.6.0-cp36-cp36m-linux_x86_64.whl\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#激活虚拟环境后，通过终端直接安装\npip install tensorflow-gpu==1.14.0\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h4",{attrs:{id:"三、测试tensorflow-gpu是否安装成功"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、测试tensorflow-gpu是否安装成功"}},[s._v("#")]),s._v(" 三、测试tensorflow-gpu是否安装成功")]),s._v(" "),n("p",[s._v("测试代码如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import tensorflow as tf\na = tf.constant([1.,2.,3.,4.,5.,6.], shape=[2,3], name='a')\nb = tf.constant([1.,2.,3.,4.,5.,6.], shape=[3,2], name='b')\nc = tf.matmul(a,b)\n\nwith tf.Session(config= tf.ConfigProto(log_device_placement=True)) as sess:\n    print(sess.run(c))\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("成功检测到GPU，表明安装成功，且可以调用GPU运行。")]),s._v(" "),n("p",[s._v("GPU使用率：terminal下run："),n("code",[s._v("nvidia-smi -q -g 0 -d UTILIZATION -l")]),s._v("\nor run："),n("code",[s._v("watch -n 2 nvidia-smi")])]),s._v(" "),n("p",[s._v("注意可能会出现tensorflow-gpu版本和cuda，cudnn版本的不匹配问题，需要卸载")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/linhai1028/article/details/79525507",target:"_blank",rel:"noopener noreferrer"}},[s._v("ubuntu下tensorflow-gpu环境搭建"),n("OutboundLink")],1)]),s._v(" "),n("h4",{attrs:{id:"四、查看tensorflow-gpu安装版本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、查看tensorflow-gpu安装版本"}},[s._v("#")]),s._v(" 四、查看tensorflow-gpu安装版本")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("在python环境中输入：\n\nimport tensorflow as tf\n\ntf.__version__     (查看版本）\n\ntf.__path__        （查看路径）\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h4",{attrs:{id:"五、卸载命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#五、卸载命令"}},[s._v("#")]),s._v(" 五、卸载命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo pip uninstall tensorflow\nsudo pip3 uninstall tensorflow\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h4",{attrs:{id:"六、安装keras"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#六、安装keras"}},[s._v("#")]),s._v(" 六、安装Keras")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pip install keras -U --pre\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h4",{attrs:{id:"七、验证安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#七、验证安装"}},[s._v("#")]),s._v(" 七、验证安装")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("进入python命令环境\n\nimport keras\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Keras测试：\n\nKeras中mnist数据集测试 下载Keras开发包\n\nconda install git\n\ngit clone https://github.com/fchollet/keras.git\n\ncd keras/examples/\n\npython mnist_mlp.py\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("在《Tensorflow技术解析与实战》一书中提到，keras安装后需要选择依赖的后端，在~/.Keras/keras.json下修改最后一行backend对应的值，（默认后端是tensorflow，不用修改）也就是：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('｛\n\n"image_dim_ordering":"tf",\n\n"epsilon":le-07,\n\n"floatx":"float32"\n\n"backend": "tensorflow"\n\n｝\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h4",{attrs:{id:"八、出现问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#八、出现问题"}},[s._v("#")]),s._v(" 八、出现问题")]),s._v(" "),n("p",[s._v("安装keras出现："),n("code",[s._v("ImportError: cannot import name 'tf_utils'")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('>>> import tensorflow\n>>> import keras\nUsing TensorFlow backend.\nTraceback (most recent call last):\n  File "<stdin>", line 1, in <module>\n  File "/home/reyhan/project/.virtualenvs/keras_tf/lib/python3.6/site-packages/keras/__init__.py", line 3, in <module>\nfrom . import utils\n  File "/home/reyhan/project/.virtualenvs/keras_tf/lib/python3.6/site-packages/keras/utils/__init__.py", line 6, in <module>\nfrom . import conv_utils\n  File "/home/reyhan/project/.virtualenvs/keras_tf/lib/python3.6/site-packages/keras/utils/conv_utils.py", line 9, in <module>\nfrom .. import backend as K\n  File "/home/reyhan/project/.virtualenvs/keras_tf/lib/python3.6/site-packages/keras/backend/__init__.py", line 1, in <module>\nfrom .load_backend import epsilon\n  File "/home/reyhan/project/.virtualenvs/keras_tf/lib/python3.6/site-packages/keras/backend/load_backend.py", line 90, in <module>\nfrom .tensorflow_backend import *\n  File "/home/reyhan/project/.virtualenvs/keras_tf/lib/python3.6/site-packages/keras/backend/tensorflow_backend.py", line 13, in <module>\nfrom tensorflow.python.keras.utils import tf_utils\nImportError: cannot import name \'tf_utils\'\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[s._v("安装的keras版本是2.3.1的，卸载安装keras2.1.5版本，解决该问题，首先卸载现有keras版本：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pip uninstall keras\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("安装keras2.1.5版本：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pip install keras==2.1.5\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"cuda多版本安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cuda多版本安装"}},[s._v("#")]),s._v(" cuda多版本安装")]),s._v(" "),n("h3",{attrs:{id:"下载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[s._v("#")]),s._v(" 下载")]),s._v(" "),n("p",[s._v("cuda9.0安装：")]),s._v(" "),n("p",[s._v("https://developer.nvidia.com/cuda-90-download-archive?target_os=Linux&target_arch=x86_64&target_distro=Ubuntu&target_version=1604&target_type=runfilelocal")]),s._v(" "),n("p",[s._v("cuda历史版本下载：")]),s._v(" "),n("p",[s._v("https://developer.nvidia.com/cuda-toolkit-archive")]),s._v(" "),n("p",[s._v("cudnn7.6.5安装：")]),s._v(" "),n("p",[s._v("https://developer.nvidia.com/rdp/cudnn-archive")]),s._v(" "),n("p",[s._v("注意版本对应")]),s._v(" "),n("h3",{attrs:{id:"环境配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#环境配置"}},[s._v("#")]),s._v(" 环境配置")]),s._v(" "),n("p",[s._v("cuda安装完成后，配置cuda环境：")]),s._v(" "),n("p",[s._v("在"),n("code",[s._v("～/.bashrc")]),s._v("文件中修改或者添加如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim ~/.bashrc\n\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/lib64\nexport PATH=$PATH:/usr/local/cuda/bin\nexport CUDA_HOME=$CUDA_HOME:/usr/local/cuda\n\nsource ~/.bashrc\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("若之前安装过别的版本，上述文件修改为cuda即可，使用cuda这个软链接选择指定cuda版本。")]),s._v(" "),n("h3",{attrs:{id:"多版本切换"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#多版本切换"}},[s._v("#")]),s._v(" 多版本切换")]),s._v(" "),n("p",[s._v("在/usr/locala目录下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#切换cuda版本\nrm -rf /usr/local/cuda  #删除之前创建的软链接\nsudo ln -s /usr/local/cuda-9.2/ /usr/local/cuda   #添加新版本了连接\nnvcc -V  #查看当前cuda版本\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("参考：https://blog.csdn.net/weixin_42416791/article/details/115720595")]),s._v(" "),n("h3",{attrs:{id:"问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[s._v("#")]),s._v(" 问题")]),s._v(" "),n("p",[s._v("nvcc –V查看的cuda版本不是软链接的cuda对应的版本问题解决")]),s._v(" "),n("p",[s._v("修改"),n("code",[s._v("/etc/profile")]),s._v("，在末尾加上：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim /etc/profile\n\nexport PATH=/usr/local/cuda/bin:$PATH\nexport LD_LIBRARY_PATH=/usr/local/cuda/lib64$LD_LIBRARY_PATH\nexport CUDA_HOME=/usr/local/cuda\n\nsource /etc/profile\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("然后更改PATH内顺序：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("root@jiang-X299:/home/jiang/桌面# export PATH=/usr/local/cuda/bin:$PATH\nroot@jiang-X299:/home/jiang/桌面# echo $PATH\n/usr/local/cuda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/cuda-9.0/bin:/home/jiang/anaconda3/bin\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("参考1：https://blog.csdn.net/weixin_42416791/article/details/115720595")]),s._v(" "),n("p",[s._v("参考2：https://www.jianshu.com/p/6a6fbce9073f")]),s._v(" "),n("h3",{attrs:{id:"版本查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#版本查询"}},[s._v("#")]),s._v(" 版本查询")]),s._v(" "),n("p",[s._v("安装完成cuda后 还需要安装对应版本的cudnn")]),s._v(" "),n("p",[s._v("使用 PyTorch 查看 CUDA 和 cuDNN 版本：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import torch\nprint(torch.__version__)\nprint(torch.version.cuda)\nprint(torch.backends.cudnn.version())\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("查看cuda版本方法：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("nvcc -V\n或\nnvcc --version\n或\ncat /usr/local/cuda/version.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("查看cudnn版本：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cat /usr/local/cuda/include/cudnn.h | grep CUDNN_MAJOR -A 2\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("版本：7.6.5\n\n#define CUDNN_MAJOR 7\n#define CUDNN_MINOR 6\n#define CUDNN_PATCHLEVEL 5\n--\n#define CUDNN_VERSION (CUDNN_MAJOR * 1000 + CUDNN_MINOR * 100 + CUDNN_PATCHLEVEL)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"pytorch安装过慢问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pytorch安装过慢问题"}},[s._v("#")]),s._v(" pytorch安装过慢问题")]),s._v(" "),n("p",[s._v("直接利用"),n("code",[s._v("conda/pip install XXX")]),s._v(" 从pytorch官网安装代码速度太慢，会出现进度中断情况。通常的做法是添加清华镜像的下载路径。")]),s._v(" "),n("h3",{attrs:{id:"conda镜像源修改"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#conda镜像源修改"}},[s._v("#")]),s._v(" conda镜像源修改")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim ~/.condarc\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("添加如下内容：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("channels:\n  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/\n  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/\n  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/\n  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/Paddle/\n  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/fastai/\n  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/\n  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/bioconda/\nshow_channel_urls: true\nssl_verify: false\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("然后再去pytorch官网复制下载代码，删掉后面的-c pytorch,因为它表示从官网进行下载，不从清华镜像源下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("conda install pytorch torchvision cudatoolkit=9.0 -c pytorch\n修改为：\nconda install pytorch torchvision cudatoolkit=9.0\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"pip镜像源修改"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pip镜像源修改"}},[s._v("#")]),s._v(" pip镜像源修改")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo gedit ~/.pip/pip.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("添加如下内容：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[global]\n#index-url=http://mirrors.aliyun.com/pypi/simple/\n#index-url = https://pypi.tuna.tsinghua.edu.cn/simple/\n#index-url=https://pypi.python.org/simple/\nindex-url=https://pypi.douban.com/simple/\n[install]\n#trusted-host=mirrors.aliyun.com\n#trusted-host=pypi.tuna.tsinghua.edu.cn\n#trusted-host=pypi.python.org\ntrusted-hosr=pypi.douban.com\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("若没有"),n("code",[s._v("pip.conf")]),s._v("文件，创建如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd ~/.pip\ntouch pip.conf\n\n若没有目录：\nmkdir ~/.pip\ncd ~/.pip\ntouch pip.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h3",{attrs:{id:"离线安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#离线安装"}},[s._v("#")]),s._v(" 离线安装")]),s._v(" "),n("p",[s._v("但是有时候更换国内的源，下载仍会很慢，会中断，考虑去镜像源网站直接下载，然后离线安装，方法如下：")]),s._v(" "),n("p",[s._v("此处以ubuntu16.04系统下为例：")]),s._v(" "),n("p",[s._v("下载安装包：")]),s._v(" "),n("div",{staticClass:"language-plain line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("pytorch-1.7.1-py3.7_cuda9.2.148_cudnn7.6.3_0.tar.bz2\ntorchaudio-0.7.2-py37.tar.bz2\ntorchvision-0.8.2-py37_cu92.tar.bz2\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("激活创建好的虚拟环境（pytorch），在该虚拟环境下，切换到下载文件的位置，执行命令安装：")]),s._v(" "),n("div",{staticClass:"language-plain line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("(pytorch) $ conda install --offline pytorch-1.7.1-py3.7_cuda9.2.148_cudnn7.6.3_0.tar.bz2\n(pytorch) $ conda install --offline torchaudio-0.7.2-py37.tar.bz2\n(pytorch) $ conda install --offline torchvision-0.8.2-py37_cu92.tar.bz2\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("下载对应版本的"),n("code",[s._v("pytorch、torchvision、cudatoolkit等")]),s._v("，然后离线安装。")]),s._v(" "),n("p",[s._v("离线安装注意切换到对应的虚拟环境下进行，cd命令把当前目录改到下载的离线文件所在目录。")]),s._v(" "),n("p",[s._v("最好离线安装安装包的文件，对于一些依赖包，可以先在线安装好，最后离线安装如pytorch、torchvision、cudatoolkit等下载很慢的安装包。")])])}),[],!1,null,null,null);a.default=t.exports}}]);